# 我眼中的前端技术架构

> 伴随着前端在各个领域的不断深入，从安全、移动、前端、数据、技术风险、质量、数据库与存储、应用架构与中间件、计算平台、图像视频、自然语言、机器学习、系统架构及基础设施、芯片与系统等技术领域，对前端来说带来了很多想象空间。

在互联网的数字世界中，前端成为用户与用户之间连接的桥梁，致力于打造卓越的用户体验，通过连接业务、设计、技术来共同打造商业的新体验。

## 前端技术三大发展阶段

前端技术方向将其归纳为三个大的阶段：青铜时代、白银时代、黄精时代。

* 青铜时代，前端技术体系从研发效率和能力的角度触发，解决的是一个个技术难点。在这个时期，未来支撑页面开发以及灵活的数据配置，需要建立搭建体系，在无线时代来临时，涌现出需要双端解决方案；在基于用户体量指数级增长和CDN架构升级的情况下，开始从集群服务演进为回源机制的Cache集群；

* 白银时代，前端技术体系在提供基础能力上，针对运营类活动更多从平台化产品化方向来演进，提供极致的用户体验。这个时期，通过平台完成数据标准化，提供很多平台化的前端技术产品，以及在性能优化上建立起完整的技术解决方案。

* 黄金时代，这是目前前端技术体系的发展所处的阶段，这个阶段我们更多的关注能为业务带来的价值。这个时期，重点基于个性化能力，通过数据化、智能化的方案，提升页面转换&内容曝光，主要分为数据驱动UI和智能界面。

按照时间线来看，可以分为几个重要的节点，2003年：结构、样式、行为分离，前端岗位出现；2008年：90%的性能优化在前端，开启来工程化的时代；2013年：前后端分离，开启来全栈的演进；2014年无限时代的来临，促进了无线架构飞速的演进；2016年：开始看待如何通过Low/No Code的体系来重塑中后台。

## 前端技术八大核心方向

经过多年的持续投入和不断建设，工程化、跨端技术、中后台、Nodejs已经成为前端技术体系的基石。到了现在，随着前端在搭建、智能化、数据可视化等方向中不断深耕探索着未来前端的前进道路，已经形成了如下体系结构：

![architecture1](/assets/architecture1.png)

## 前端技术体系详细分类

![architecture2](/assets/architecture2.png)

## 一、搭建

搭建，是指以模块化组装的方式构建页面的技术体系。在搭建体系建立之初，核心主要解决三个问题，前端的开发效率、动态化的能力、运营可快速干预数据，搭建系统确定了搭建系统的基础设计，大多数的概念延用至今，比如模块研发工程、全局的模版、模块schema、后端渲染能力。

搭建平台实现一个URL对应多端的能力，自动生成多端页面，基于Node服务和CDN提供高可用页面渲染服务，设置标准化数据模型，投放支持个性化数据源，支持运营配置个性化规则等多个重要功能。

### 核心概念

模块是搭建技术体系中可沉淀复用的最小业务单元，基于模块可规模化的组装出成千上万的页面。

搭建是解决业务增长规模和技术交付能力之间矛盾产生的解决方案。在技术上搭建核心可以用一句话描述：在离线环境组装模块（页面结构）和投放数据通过发布到在线环境完成渲染的页面制作方式。

### 相关建设

* 通用搭投服务：为搭投系统提供底层通用解决方案，管理模块生态；

* 通用搭建工具平台：为运营提供模块化搭建页面的能力，开发者仅需维护模块即可服务业务；

* 云上建站服务：满足不同行业的个性化需求；

* 基于Node.js编写的服务端渲染模版的容器，提供全平台的统一前端模版渲染环境。

* 面向用户体验的前端数据网关，面向前端提供了服务端JavaScript运行容器，可以作为简化的BFF中间层，面向后端提供了流量分组隔离、容灾的能力。

## 二、智能化

前端智能化，是指将智能化的能力应用到前端的场景。目前主要切入点是Design2code（设计生成代码），期望未来能够实现前端0研发。

### 核心概念

智能化是指使用机器学习等方案将传统的算法能力应用到目前的前端场景，通过结合前端自有的专业领域数据样本集构建出前端特色的智能化模型。

Design2Code是设计稿生成代码，Code包含UI和Logic，丰富的样本数据集是支撑Design2Code核心识别能力的重要要素。

### 相关建设

* 由设计稿一键智能生成代码；
* 让前端能够快速的使用深度学习；

## 三、工程中台

前端开发环境是期望大家基于统一的工具和环境完成开发任务，基本保证开发过程的统一。

当我们推动代码管理方式升级，优化整合代码上线逻辑，梳理出透明可控的权限管理方式，前端登上了一艘叫“工程化”的大船。

在瞬息万变的前端领域，需要有更加开放、更有生命力的工程支撑舰队保驾护航。面向未来的开发生态，我们正在路上。

### 核心概念

静态资源发布以及静态资源发布+页面部署，涵盖来日常业务开发的大部分场景，除此之外，还有更多的通用流程：Assets非覆盖式发布、Assets覆盖发布、npm发布、FaaS函数发布、WebApp发布、小程序发布。

相关建设

* 前端工程研发平台；
* 为web研发提供多重解决方案和研发支撑，帮助开发优质应用；
* 解耦真机能力和业务平台，让开发者和业务平台更好的专注于自己的业务体系；
* 通过网页对手机进行远程操作和调试，海量机型可用。可以远程使用各种平台IoT设备，支持不同的设备特性；
* 从工程师视角到业务视角，关注业务整体的前端健康度；
* 对发布的业务默认即享有实时前端异常监控与业务监控服务，同时提供强大的异常数据分析、报警推送、开放平台等能力；

## 四、NodeJS

Node.js的出现使前端在后端体系里面更加专注前台的UI层、逻辑层、后端关注后台的接口；让我们之间分工更加明确。

### 核心概念

BFF应用是指Backend For Frontennd即服务于前端的后端。背景主要是前后端分层，前端逐渐向全栈发展的过程中兴起。简单的说我们可以理解为，有一些可能变动比较频繁的业务逻辑，从划分上来看离前端更近，前端同学改起来成本更低。

单体应用即传统的服务端应用，单体这个词主要是与Serverless相对应，指的是服务端代码、依赖全部都捆在一起作为一个单体部署在多台vm虚拟机上来提供服务，而Serverless则是把业务逻辑拆分到多个函数片段部署Serverless平台。

Serverless是一个Node.js新兴的应用方向。前端可以不用关心很多跟server有关的运维操作，比如机器的申请、机器的伸缩等问题。

### 相关建设

* NPM包管理；
* 需要一套基于社区Node改进的运行时环境和服务平台。
* 基于koa或express的企业级web框架；
* 面向未来的web全栈应用开发框架，基于原有的IoC基础和代码风格，提供标准化FaaS开发模型、一套框架和一套完整的开发到部署的工具链、函数运行时支持。
* 一套完善的中间件
* 一套Node.js治理的APM服务。

## 五、数据可视化

数据时代一个显著特征是数据可视化的崛起，被誉为大数据分析决策应用领域里的最后一公里。

数据可视化将数据分析、工程技术与设计艺术完美结合，借助图形化的手段，用比文字快十倍甚至百倍的速度清晰有效地传达信息，让人们可以利用人类经历漫长进化得来的强大视觉化思考本能去对所呈现数据进行挖掘、整合，得以辅助分析和决策。

通常有通用报表、移动端图表、大屏可视化、图编辑&图分析、地理可视化；

### 核心概念

数据可视化研究的是，如何将数据转化成为交互的图形或图像等，以视觉可以感受的方式表达，增强人的认知能力，达到发现、解释、分析、探索、决策和学习的目的。广义的数据可视化涉及信息技术、自然科学、统计分析、图形学、交互、地理信息等多种学科。

### 相关建设

* 需要提供一套简单方便、专业可靠的数据可视化最佳实践；
* 需要一套企业中后台通用图表解决方案，能够在项目中实现常见图表以及高度自定义的图表；
* 需要一套纯JavaScript实现的地理空间数据可视化渲染引擎。通过灵活的配置，可以快速制作出如散点、轨迹、区面、热力图等地理位置相关的可视化产品；
* 工业大脑图表在帮助工厂企业完成数字化、智能化转型中，会参与各种各样的项目，这些项目有些是由自己参与，也有些需要横向团队参与完成，但由于项目可能缺少统一的视觉输出，所以导致前端做出的图表样式风格不一，所以基于此，与设计师一起产出一套工业大脑图表视觉规范与之一一对应的UI组件图表库。

## 六、国际化

随着不同的业务可能需要在海外投放，而出海的前提就是产品架构的国际化和产品体验的本地化。国际化技术一方面需要帮助中文业务快速出海，同时也需要帮助海外业务融入到本土。

### 核心概念

在谈论到产品国际化的时候，一般都会说到三个术语，全球化、国际化、本地化。全球化Globalization=G11n，国际化Internationalization=I18n，本地化Localization=L10n。

国际化开发规约，国际化软件需要根据用户的地区、语言输出符合当地用户文化、习惯的内容。全球有220多个国家和地区，6000多种语言，需要一套规约来保证不同的系统对于地区、语言、货币和时间的描述是一致的，让不同的系统在最基本的编码层面互通。

国际技术白皮书：沉淀总结技术规范与技术产品能够更加的通用，帮助出海的业务诉求

快速本土化：保证各个业务提供给用户的信息和交互方式完全符合不同用户的文化，语言和区域习惯。

国际化体验/程度度量：明确国际化度量标准，明确，量化不同的业务需求下需要做的国际化的程度，并提供对应的升级方案；提供工具可以快速完成指定页面或平台的国际化程度，通过整合能力和提供问卷方式：明确设计规范，提供不同场景国际化设计需要的规约，共享基础组件；明确不同域用研方法和标准，用统一的用研方案衡量国际化完成程度。

### 相关建设

* 国际化技术能基础平台：多语言、国际化；
* 海外网络性能监控，涵盖接口和CDN域名性能；
* 多模态、多视角、专业的国际化多语言数字内容管理平台，让文案管理高效、及时、协同，为应用产品的国际化本地化提供数字内容的多语言托管、生产、管控、分发、消费等综合服务。
* 基于AST语法分析完成文案提取、命名和替换，并且自动生成相关依赖，让一个应用可以快速具有多语言切换能力；
* 从页面维度出发，如何使用浏览器插件为多语言页面注入提供便捷国际化研发服务的脚本，包括key语言的使用；
* 国际化代码扫描，从代码层面进行检查，发现潜在的国际化相关问题，主要包括硬编码的文案、地域（locale）敏感的方法调用、静态文件引用、其他跟国际化问题，如字符集、字体等。

## 七、中后台

中后台这个概念的定义已经有3-4年的实践了，面对中后台业务庞大的体量问题，在中后台前端领域我们一方面要提高这些后台的研发效率，另一方面需要通过降低门槛+赋能让开发或测试同学具备一定的中后台系统开发能力，总结下来核心解决2个问题：降低研发门槛、提高研发效率，当然在此基础上我们还需要关注体验等问题。

### 核心概念

我们把所有面向非消费者端的业务统一定义为中后台业务，包括商家侧、运营侧、技术开发侧；

基础组件：基于React的高可定制性的基础UI组件，例如Button，Form等；
物料：提供模版、组件、区块不同维度的物料，以及项目开发的最佳实践，提高项目的研发效率；
物料中心：收集&汇总物料，在规范的约束下，完成业务组件、区块、模版等各类物料的标准统一，通过丰富物料生态的共享提升研发系统的效率。

### 相关建设

* 协助企业设计师与前端构建并使用设计系统；
* 服务于企业级产品的设计体系，基于确定和自然的设计价值观上的模块化解决方案，让设计师和开发者专注于更好的用户体验；
* 简单友好的中后台前端研发体系，拥有海量可复用的物料，搭配GUI工具极速构建前端应用；
* 中后台可视化搭建平台，拥有丰富的物料体系，强大的可视化编辑器，具备与源码开发相同的灵活度与扩展性；

## 八、跨端技术

随着前端技术边界的不断扩大，前端在无线领域的能力也越来越大。大致分为几个阶段：

* 从2014年开始移动端逐渐成为业务的主要阵地，前端的技术重点也逐步从PC转向无线；jQuery等框架逐步离开舞台，取而代之的是Zepto等更加轻量的H5框架。

* 更多移动端框架的兴起让我们有了更多选择，面对复杂繁琐的DOM操作，虚拟DOM让我们可以更便捷的开发，于是React或Vue开始出现；

* 随着无线领域进一步的发展，开发者们意识到客户端的能力给页面能够打来更大的提升，RN或Flutter让前端可以将能力延伸到客户端领域；

* 从一次学习到一次编写，前端领域的技术突破一直在持续，实现多端开发的思路；

* 随着前端业务的快速发展，新的业务形态也在引领我们工作内容的变化，比如小程序；

今天无线端的发展和变革还在继续，对于性能、体验、效率和质量的追求让我们不断的学习和进步；

### 核心概念

* 移动端布局：相对于PC端，移动端的布局需要更加灵活和轻便，面对各种尺寸的设备需要有较好的兼容性；
* 可用性：一个移动端站点需要足够的容易操作才能在小尺寸的屏幕上发挥最大的用途。可用性大体包括：无障碍性、网页逻辑的清晰度、容易使用的导航、内容易于阅读、快速迭代；
* 性能：相比PC，移动端开发更加注重性能，在性能上主要包括：加载性能、渲染性能、内存。

### 相关产品

* 一套超轻量，高性能，易上手的前端解决方案。一次开发多端运行，解放重复工作，专注产品逻辑，提升开发效率；
* 小程序：运行在客户端，可以被边界的获取和传播，为终端用户提供更优的用户体验；


