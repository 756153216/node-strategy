# 第二篇 软件开发流程的认知

## 前言

软件开发中有一句话“我们的核心价值是对软件开发体系的认知”
接下来我从产品的开发流程视角来分析:
流程化、组件化、方案评审、调试问题、沟通成本、反复的迭代，安全、灰度、预发布、发布环节的检测，如何防止漏发，防止乱发，快速回滚，以及产品的质量体系建设等。这些都是通用的，甚至是行业通用的一些方式和方法论.

## 1. 需求规划

这个阶段是技术leader、产品leader,以及项目经理共同讨论,如何确定需求优先级的高低,成为这个阶段的关键因素,这个阶段有一些可预期的指标:产品迭代的周期、预估用户量、用户的使用场景、用户的关注焦点等.

关键步骤:

* 要让这个阶段做的事情更有预期,要评估这个需求的目的(能带来多少价值、价值是什么、什么是可衡量的价值);
* 竟品对比,同类型产品的流程设计.这个设计一定要分析,并且有邮件或文档输出;

## 2. 需求宣讲

当决定做这个需求,对应的优先级也就敲定.

关键步骤:

* 这个时候产品会出原型稿进行宣讲,参与角色会有终端、后台、前端,也包括各端的技术负责人;
* 确定各个端的技术owner.由owner牵头进行技术方案的设计;

这个过程是一个熟悉需求的过程,也是熟悉人的过程,知道谁跟你配合,找到关键路径.
这里建议产品在宣讲的时候应该准备一个流程图,或者产品架构的功能图,每一个模块的分支、功能点,要达到的效果和路径.目的是减少沟通成本.

## 3. 方案评审

* owner统一完成设计、整理技术方案,前端、终端、后台进行邮件或文档同步;
* 确定时间,进行评审,需要产品、各端的开发,以及技术owner、团队技术负责人等,一起进行技术方案评审,产品查缺补漏.

这个阶段:产品需要review方案设计的功能点是否达成一致,这是一个关键的里程碑.

owner在这个阶段需要做到及时反馈问题:

* 承担自己工作方向的整体流程的串联;
* 对负责内的项目同学,需要具有一定的影响力(方案评审、人员沟通、项目跟进、日常问题、总结沉淀)

## 4. 需求排期

这个阶段要把需求拆开分解,由负责开发具体功能的同学,评估开发时间,并进行排期,技术owner检验开发同学的排期是否标准合乎要求,

当然更多的是为了检查是否有遗漏的点(这一点非常重要,这是开发前最后一次检查错误的机会,错过了,风险就会很大)
大部分互联网产品的核心矛盾是产品形态和产品架构问题,而不是技术问题.

这里架构设计之后的进行排期,排期的是按照产品给出的功能点进行拆分细化后的架构点;
这个时候,需要有整体的架构图出来,作为项目沉淀和交接文档沉淀;
文档需要按照项目和功能进行沉淀,无论是团队wiki,还是git中的doc目录,都可以,按照一定的组织规则进行设计.

## 5. 开发阶段

* 首先是接口协议,对于稳定的业务面向架构的编程(SOA)尤其重要.需要提高我们对产品和用户的理解,把80%的时间花在最有价值的20%的核心功能上.先完善接口,把接口写清楚,可以保证功能的完整性,方便开发同学联调,并且沉淀文档,为后续项目持续迭代和项目交接提升效率, “接口即契约,要有契约精神”;

需要经历从面向接口->面向架构->面向服务的渐进阶段

* 其次,站会是敏捷开发的一个重要环节:时间和团队人数控制在20分钟和7人上下,目的是同步进度、阐明风险、协调资源;人数超过15人建议搞会议,进行扁平化管理,包括核心owner+成员分开开会,节省时间.

开发阶段需要关注排期、协议、风险、可控,对于一个有技术追求的工程师,在日常业务需求中加入技术需求是很重要;

## 6. 联调、预发布

联调重点在以下几个方面:

* 第一: 协议
* 第二: 新功能,是否能实现,老功能是否正常;
* 第三: 产品目标和开发同学理解是否一致,修改的代码是否会导致系统不稳定;

协议:面向契约的编程是目前行业最简单的开发流程;业务开发之前,协议和字段必须要定下来.先不做业务,第一步就是,对接口和功能,分治隔离的开发是效率最高的事情,流水线是这个行业早已经沉淀的精华.前端控制接入层才是正途.

剩下两点的风险解决:来源于沟通,让产品更早进入体验,是流程中一个很重要的环节,将需求切开,更早的引入产品体验.提早把风险和产品问题暴露出来.

联调环境的建设:为每一个开发者构建一套完整闭环的测试流程,把正式环境的数据同步到docker稳定的测试环境,让测试环境和正式环境、开发环境、预发布环境隔离.

## 7. 测试阶段

现在团队的测试方式是,将测试优先级分为P0到P1,开发自测定位P0.

* P0测试之后,进入开发提测阶段;

* 进入开发提测阶段之后,需要关注的事情:

  * 第一点:跟测阶段,一方面改BUG,另一方面是总结,发现可以改进的流程优化和技术优化;
  * 第二点:28原则,适当的阶段复盘,可以找到出问题的地方;
  * 第三点:项目总结和架构设计总结.团队应该有这样的储备和沉淀,每做完一个大型项目的时候,应该进行分享和沉淀;
  * 第四点:要保持专业的态度,要有持续学习的态度.

## 8. 全量发布

发布,最少3个环节,预发环境、灰度环境、正式环境.

不同的团队,结合实际情况,主要有以下发布方式:

* 大版本发布:出问题会导致整体功能回滚.
* 按需求发布:会出现版本过多,不过回滚时只回滚小功能;
* 周版本发布:每周二、周四,虽然存在耦合,不过相对保证了版本数量.

## 后记

* 开发人员也要有追求产品细节的精神,对交互提出的修改应该予以满足,只要是对产品体验有意义的事情;
* 在实际开发中,有些需求功能可能会变更.这个时候,也需要设计在此走查;
* 如果需求方案重新进行评审,需要拉上视觉一起评审
