# 第四节 前端A/B实验设计

## 简介

前端一直以来都缺少一条简洁而高效的AB实验接入方案，过去大多数前端在接到AB需求，唯一的选择就是调用客户端提供的方法来实现，首先它依赖需要前端开发人员花大量心思去处理AB的逻辑，此外，它的作用范围局限于端内，并不能覆盖前端所有的场景，比如外投，小程序或PC。因此，打造一个前端标准化的简单高效的AB实验体系，势在必行。

## 一、设计思路

一条完整的AB实验链路到底需要什么？分流，创建实验，工程接入，实验数据回流，但是如果没有把它们组织成体系，那么很难体系价值，更谈不上架构设计，所以我们需要把这些分散的元素尝试归类。

一条完整的AB实验链路其实可以拆分成两部分：

* 第一部分是实验配置链路，顾名思义它包含了所有与实验配置相关的操作，配置创建、保存、分组，配置的推送或下发，以及使用配置进行实时分流。
* 第二部分是实验数据链路，它包含实验数据链路的采集，上报，计算，展示（实验报表）。把这两部分拼成一个闭环，也就是我们设计前端AB实验的核心。下面给大家介绍这两个数据模型。

## 二、实验配置模型

![experiment-sdk.png](/assets/experiment-sdk.png)

从上图可以看出，我们将实验配置以前端应用为维度进行组合，然后下发到CDN，前端工程侧则通过实验SDK读取配置，完成分流并渲染相应的业务组件。

前端应用我们可以理解为一个前端工程，比如小程序就是一个前端应用。应用里面包含了场景，一个独立的流量入口我们称之为场景，比如首页就是一个场景，二级页面也是一个场景。场景同时也是分流的模型。

