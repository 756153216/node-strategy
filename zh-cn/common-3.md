# 第三节 常见JS代码片段分析

## No.1 Promise引发的故障沉默.

先看一段有问题的代码,此代码段缺少.catch.

```js
new Promise((resolve, reject) => {
    throw new Error("error");
}).then(console.log);
```

改正之后的代码:

```js
new Promise((resolve, reject) => {
    throw new Error("error");
}).then(console.log).catch(console.error);
```

No.2 js中0.1+0.2===0.3是否为true?在不知道浮点数的位数时应该怎样判断两个浮点数之和与第三个数是否相等?

首先,执行结果0.1+0.2===0.3为false.
在计算机程序中浮点数误差普遍存在,浮点运算本质上只是一个近似计算,因此对比浮点数相等时,我们可以计算浮点数之差,如果结果小于某个可接受的误差值,则可以说明这两个浮点数意义上相等.

扩展:浮点数运算过程
* 对阶:两个浮点数的小数点位置对齐,小的阶码向大的阶码看齐.[误差开始]
* 尾数求和:将对阶后的两尾数按定点加减运算规则求和(或差)
* 规格化:为增加有效数字的位数,提高运算精读,必须将求和(差)后的尾数规格化,右归导致低位丢失
* 舍入(0舍1入)
* 溢出判断:根据阶码判断浮点运算是否溢出.


# 参考

### [js浮点运算](https://blog.csdn.net/u013347241/article/details/79210840)

